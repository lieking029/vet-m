(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{33:function(t,e,a){"use strict";a.r(e);var r=a(0),s=a.n(r),n=a(5),i=a(1),o=a.n(i),l=a(2),c=a.n(l);function u(t,e,a,r,s,n,i){try{var o=t[n](i),l=o.value}catch(t){return void a(t)}o.done?e(l):Promise.resolve(l).then(r,s)}function d(t){return function(){var e=this,a=arguments;return new Promise((function(r,s){var n=t.apply(e,a);function i(t){u(n,r,s,i,o,"next",t)}function o(t){u(n,r,s,i,o,"throw",t)}i(void 0)}))}}function v(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function m(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var f={metaInfo:function(){return{title:"Manage Students"}},middleware:"auth",computed:function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?v(Object(a),!0).forEach((function(e){m(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}({},Object(n.b)({user:"auth/user"})),data:function(){return{data:[],checkifnew:!1,progressBar:!1,search:"",rowsPerPageItems:[10,25,50,100],headers:[{class:"border ",text:"Fullname",value:"fullname"},{class:"border ",text:"Year",value:"year"},{class:"border ",text:"Section",value:"section"},{width:10,class:"border ",text:"Status",value:"active"},{width:150,class:"border ",text:"Action",value:"id"}],dialog:!1,formRules:[function(t){return!!t||"This is required"}],emailRules:[function(t){return t.match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)||"Invalid Email address"}],form:{id:"",nick_name:"",first_name:"",last_name:"",middle_name:"",contact:"",email:"",active:"",course:[],year:[],id_number:[],picture:""},list_user_type:[],list_user_status:[{name:"Active",id:"1"},{name:"Inactive",id:"0"}],data1:[],header1:[{width:160,class:"border",text:"Year",value:"year"},{width:250,class:"border",text:"Course",value:"course"},{class:"border",text:"Subject",value:"name"},{class:"border",text:"Description",value:"description"},{width:10,class:"border",text:"Unit",value:"unit"},{width:10,class:"border",text:"Status",value:"active"},{width:10,class:"border",text:"Action",value:"id",sortable:!1}],dialogSettings:!1,refreshSettings:!0}},created:function(){this.user?this.list():this.$router.push({name:"login"}).catch((function(t){}))},methods:{addUser:function(){this.clearForm(),this.checkifnew=!0,this.dialog=!0},list:function(){var t=this;return d(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.progressBar=!0,e.next=3,c.a.get("/api/account/list",{params:{type:3}}).then((function(e){t.data=e.data,t.progressBar=!1}));case 3:case"end":return e.stop()}}),e)})))()},deleteItem:function(t){var e=this;return d(s.a.mark((function a(){return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,o.a.fire({title:"Do you want to delete this account?",html:"",icon:"question",showCancelButton:!0,cancelButtonColor:"#CC0022",confirmButtonText:"Yes",cancelButtonText:"No",showLoaderOnConfirm:!0,preConfirm:function(){var e=d(s.a.mark((function e(){var a,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.post("/api/user/active",t);case 2:return a=e.sent,r=a.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),allowOutsideClick:function(){return!o.a.isLoading()}}).then((function(a){a.value&&(o.a.fire({type:"success",title:"The user has been successfully "+(0==t.active?"active":"inactive")+"."}),e.dialog=!1),e.list()}));case 2:case"end":return a.stop()}}),a)})))()},save:function(){var t=this;return d(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.$refs.form.validate()){e.next=3;break}return e.next=3,o.a.fire({title:"Do you want to "+(t.form.id?"update":"save")+" this user?",text:"",icon:"question",showCancelButton:!0,cancelButtonColor:"#CC0022",confirmButtonText:"Yes",cancelButtonText:"No",showLoaderOnConfirm:!0,preConfirm:function(){var e=d(s.a.mark((function e(){var a,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.post("/api/user/save",t.form);case 2:return a=e.sent,r=a.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),allowOutsideClick:function(){return!o.a.isLoading()}}).then((function(e){if(console.log(e),e.value){if(1==e.value)return o.a.fire({title:"The email has been already used by other user.",html:"",icon:"warning"}),!1;t.list(),o.a.fire({icon:"success",title:"The request has been successfully "+(t.form.id?"update":"save")+"."}),t.dialog=!1}}));case 3:case"end":return e.stop()}}),e)})))()},editItem:function(t){this.form.id=t.id,this.form.nick_name=t.nick_name,this.form.first_name=t.first_name,this.form.last_name=t.last_name,this.form.middle_name=t.middle_name,this.form.user_type=t.roles[0].name,this.form.contact=t.contact,this.form.active=t.active.toString(),this.form.email=t.email,this.dialog=!0},clearForm:function(){for(var t in this.form)this.form[t]="";this.checkifnew=!1},addRole:function(t){var e=this;this.dialogSettings=!0,this.refreshSettings=!1,this.$nextTick((function(){e.refreshSettings=!0}))}}},h=a(4),p=Object(h.a)(f,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-data-table",{attrs:{headers:t.headers,items:t.data,height:"385",loading:t.progressBar,dense:"",search:t.search,"footer-props":{"items-per-page-options":[10,25,50,100,-1]}},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-card-actions",[a("v-text-field",{attrs:{small:"",outlined:"",dense:"","hide-details":"",label:"Search"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),t._v(" "),a("v-spacer"),t._v(" "),a("v-spacer"),t._v(" "),a("v-btn",{staticStyle:{"text-transform":"none"},attrs:{dark:"",small:"",color:"#00794b"},on:{click:t.addUser}},[a("v-icon",[t._v("mdi-plus")]),t._v(" Add new Student")],1),t._v(" "),a("v-btn",{staticStyle:{"text-transform":"none"},attrs:{small:"",color:"orange",dark:""},on:{click:t.list}},[a("v-icon",[t._v("mdi-refresh")])],1)],1)]},proxy:!0},{key:"item.active",fn:function(e){var r=e.item;return[a("v-switch",{staticClass:" m-0",attrs:{dense:"",color:"success",small:"","hide-details":"",inset:"",value:1},on:{click:function(e){return t.deleteItem(r)}},model:{value:r.active,callback:function(e){t.$set(r,"active",e)},expression:"item.active"}})]}},{key:"item.id",fn:function(e){var r=e.item;return[a("v-hover",{scopedSlots:t._u([{key:"default",fn:function(e){var s=e.hover;return[a("v-btn",{staticClass:"px-1",class:s?"btn btn-dark text-white":"btn  btn-info text-white ",attrs:{text:"",small:""},on:{click:function(e){return t.editItem(r)}}},[a("small",[a("v-icon",{attrs:{size:"15"}},[t._v(" mdi-pencil ")])],1)])]}}],null,!0)}),t._v(" "),a("v-hover",{scopedSlots:t._u([{key:"default",fn:function(e){var s=e.hover;return[a("v-btn",{staticClass:"px-1",class:s?"btn btn-dark text-white":"btn  btn-warning  text-dark ",attrs:{text:"",small:""},on:{click:function(e){return t.editItem(r)}}},[a("small",[a("v-icon",{attrs:{size:"15"}},[t._v(" mdi-apps ")])],1)])]}}],null,!0)})]}}],null,!0)},[a("v-progress-linear",{directives:[{name:"show",rawName:"v-show",value:t.progressBar,expression:"progressBar"}],attrs:{slot:"progress",color:"green",indeterminate:""},slot:"progress"})],1),t._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"900",transition:"dialog-bottom-transition"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",{attrs:{color:"warning"}},[a("v-toolbar",{staticClass:"warning p-1",attrs:{height:"40"}},[a("h4",{staticClass:"text-white"},[t._v("Student Information")]),t._v(" "),a("v-spacer"),t._v(" "),a("v-icon",{attrs:{color:"white"},on:{click:function(e){t.dialog=!1}}},[t._v("mdi-close")])],1),t._v(" "),a("v-form",{ref:"form"},[a("v-card",{staticClass:"p-4",attrs:{flat:""}},[a("v-row",[a("v-col",{attrs:{cols:"12",lg:"3"}},[a("v-card",{staticClass:"p-2 m-2",attrs:{width:"150",height:"150"}},[a("v-img",{attrs:{width:"130",height:"130",src:"/img/logo.png"}})],1)],1),t._v(" "),a("v-col",{attrs:{cols:"12",lg:"9"}},[a("v-row",[a("v-col",{attrs:{cols:"12",lg:"4"}},[a("v-text-field",{attrs:{dense:"",small:"","hide-details":"auto"},model:{value:t.form.nick_name,callback:function(e){t.$set(t.form,"nick_name",e)},expression:"form.nick_name"}},[a("template",{slot:"label"},[t._v("\n                      Nick Name\n                    ")])],2)],1),t._v(" "),a("v-col",{attrs:{cols:"12",lg:"4"}},[a("v-select",{attrs:{rules:t.formRules,dense:"",small:"","hide-details":"",items:t.list_user_status,"item-text":"name","item-value":"id"},model:{value:t.form.active,callback:function(e){t.$set(t.form,"active",e)},expression:"form.active"}},[a("template",{slot:"label"},[t._v("\n                      Status "),a("abbr",{staticClass:"text-danger"},[t._v("* ")])])],2)],1)],1),t._v(" "),a("v-row",[a("v-col",{attrs:{cols:"12",lg:"4"}},[a("v-text-field",{attrs:{rules:t.formRules,dense:"",small:"","hide-details":"auto"},model:{value:t.form.first_name,callback:function(e){t.$set(t.form,"first_name",e)},expression:"form.first_name"}},[a("template",{slot:"label"},[t._v("\n                      First Name "),a("abbr",{staticClass:"text-danger"},[t._v("* ")])])],2)],1),t._v(" "),a("v-col",{attrs:{cols:"12",lg:"4"}},[a("v-text-field",{attrs:{dense:"",clearable:"","hide-details":"auto"},model:{value:t.form.middle_name,callback:function(e){t.$set(t.form,"middle_name",e)},expression:"form.middle_name"}},[a("template",{slot:"label"},[t._v(" Middle Name ")])],2)],1),t._v(" "),a("v-col",{attrs:{cols:"12",lg:"4"}},[a("v-text-field",{attrs:{placeholder:"Last Name",rules:t.formRules,dense:"",clearable:"","hide-details":"auto",flat:""},model:{value:t.form.last_name,callback:function(e){t.$set(t.form,"last_name",e)},expression:"form.last_name"}},[a("template",{slot:"label"},[t._v("\n                      Last Name "),a("abbr",{staticClass:"text-danger"},[t._v("* ")])])],2)],1)],1),t._v(" "),a("v-row",[a("v-col",{attrs:{cols:"12",xl:"4"}},[a("v-text-field",{attrs:{rules:t.emailRules,dense:"","hide-details":"auto"},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}},[a("template",{slot:"label"},[t._v("\n                      Email Address "),a("abbr",{staticClass:"text-danger"},[t._v("* ")])])],2)],1),t._v(" "),a("v-col",{attrs:{cols:"12",xl:"4"}},[a("v-text-field",{attrs:{dense:"","hide-details":"auto"},model:{value:t.form.contact,callback:function(e){t.$set(t.form,"contact",e)},expression:"form.contact"}},[a("template",{slot:"label"},[t._v(" Contact # ")])],2)],1)],1),t._v(" "),a("v-row",[a("v-col",{staticClass:"pull-right",attrs:{cols:"12"}},[a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{staticClass:"info",staticStyle:{"text-transform":"none"},on:{click:t.save}},[a("v-icon",[t._v("mdi-content-save-all")]),t._v(" Save")],1)],1)],1)],1)],1)],1),t._v(" "),a("hr",{staticClass:"m-1"}),t._v(" "),a("v-row",[a("v-col",[a("v-tabs",{attrs:{"icons-and-text":""}},[a("v-tab",[a("small",[t._v("Handled Subjects")]),t._v(" "),a("v-icon",[t._v("mdi-flag")])],1),t._v(" "),a("v-tab-item",[a("v-data-table",{attrs:{"fixed-header":"",headers:t.header1,items:t.data1,dense:"","items-per-page":5,height:"155"}})],1),t._v(" "),a("v-tab",[a("small",[t._v("Teachers")]),t._v(" "),a("v-icon",[t._v("mdi-contacts")])],1),t._v(" "),a("v-tab-item",[a("v-data-table",{attrs:{"fixed-header":"",headers:t.header1,items:t.data1,dense:"","items-per-page":5,height:"155"}})],1)],1)],1)],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null);e.default=p.exports}}]);